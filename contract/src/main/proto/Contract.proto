//

syntax = "proto3";
import "google/protobuf/empty.proto";
package SECDPAS.grpc;

// Request payload


message HelloRequest {
    // Each message attribute is strongly typed.
    // You also must assign a "tag" number.
    // Each tag number is unique within the message.
    string name = 1;

    // This defines a strongly typed list of String
    repeated string hobbies = 2;

    // There are many more basics types, like Enum, Map
    // See https://developers.google.com/protocol-buffers/docs/proto3
    // for more information.
}

message HelloResponse {
    string greeting = 1;
}

//Register

message RegisterRequest {
    //Class PublicKey
    bytes publicKey = 1;
}

// Post(General)

message PostRequest {
    //PublicKey
    bytes publicKey = 1;
    //Char[256]
    string message = 2;
    //Array Announcements
    bytes announcements = 3;
}

message ReadRequest {
    //PublicKey
    bytes publicKey = 1;
    //Number of posts to see
    int32 number = 2;
}

message ReadResponse {
    //Array of announcements
    bytes announcements = 1;
}

//Testing messages
message TestsResponse {
    bool testResult = 1;
}

// Defining a Service, a Service can have multiple RPC operations
service DPASService {
    // Define a RPC operation
    rpc greeting(HelloRequest) returns (HelloResponse);
    rpc register(RegisterRequest) returns (google.protobuf.Empty);
    rpc post(PostRequest) returns (google.protobuf.Empty);
    rpc postGeneral(PostRequest) returns (google.protobuf.Empty);
    rpc read(ReadRequest) returns (ReadResponse);
    rpc readGeneral(ReadRequest) returns (ReadResponse);

    //Testing Functions
    rpc clientRegisteredState(RegisterRequest) returns (TestsResponse);
    rpc postState(PostRequest) returns (TestsResponse);
    rpc postGeneralState(PostRequest) returns (TestsResponse);

}
